<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}NeonBin - Matrix Code Vault{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="/" class="logo">üíª NeonBin</a>
            <ul class="nav-links">
                <li><a href="/">üè† Home</a></li>
                <li><a href="{{ url_for('all_files') }}">üìö All Files</a></li>
                <li><a href="{{ url_for('upload_code') }}">üì§ Upload Code</a></li>
                <li><a href="{{ url_for('secret_folders') }}">üîê Secret Folders</a></li>
                <li>
                    <button class="theme-toggle" id="themeToggle">
                        <span id="themeIcon">üé®</span>
                        <span id="themeText">Theme</span>
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 NeonBin - Matrix Code Vault. Store, View, and Execute Your Code.</p>
            <p>Created by <a href="https://github.com/shield44-project" target="_blank" rel="noopener noreferrer" style="color: var(--accent-primary); text-decoration: none; font-weight: bold;">shield44</a> | <a href="https://github.com/shield44-project/pastebins" target="_blank" rel="noopener noreferrer" style="color: var(--accent-primary); text-decoration: none;">View on GitHub</a></p>
        </div>
    </footer>

    <script>
        // Theme switcher functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        // Available themes (Cyber Blue is now default/no class)
        const themes = [
            { name: 'Cyber Blue', class: '', icon: 'üíô' },
            { name: 'Light Mode', class: 'theme-light', icon: '‚òÄÔ∏è' },
            { name: 'Purple Haze', class: 'theme-purple', icon: 'üíú' },
            { name: 'Fire Orange', class: 'theme-orange', icon: 'üß°' },
            { name: 'Pink Neon', class: 'theme-pink', icon: 'üíó' },
            { name: 'Teal Wave', class: 'theme-teal', icon: 'üíö' }
        ];

        let currentThemeIndex = 0;

        // Load theme from localStorage
        const savedTheme = localStorage.getItem('neonbin-theme');
        if (savedTheme !== null) {
            const themeIndex = themes.findIndex(t => t.class === savedTheme);
            if (themeIndex !== -1) {
                currentThemeIndex = themeIndex;
                if (savedTheme) {
                    body.className = savedTheme;
                }
            }
        }
        // If no saved theme, default is Cyber Blue (no class needed)

        // Update button text
        function updateButtonText() {
            const theme = themes[currentThemeIndex];
            document.getElementById('themeIcon').textContent = theme.icon;
            document.getElementById('themeText').textContent = theme.name;
        }

        updateButtonText();

        // Toggle to next theme
        themeToggle.addEventListener('click', () => {
            // Remove current theme class
            body.className = '';
            
            // Move to next theme
            currentThemeIndex = (currentThemeIndex + 1) % themes.length;
            const newTheme = themes[currentThemeIndex];
            
            // Apply new theme
            if (newTheme.class) {
                body.classList.add(newTheme.class);
            }
            
            // Save to localStorage
            localStorage.setItem('neonbin-theme', newTheme.class);
            
            // Update button
            updateButtonText();
        });
    </script>

    <script>
        // Prevent inspect element on non-button elements (Rick Roll Easter Egg)
        document.addEventListener('contextmenu', function(e) {
            // Allow right-click on buttons, links, and input elements
            if (e.target.tagName === 'BUTTON' || 
                e.target.tagName === 'A' || 
                e.target.tagName === 'INPUT' ||
                e.target.closest('button') ||
                e.target.closest('a')) {
                return; // Allow context menu on these elements
            }
            
            // Otherwise, prevent and Rick Roll them!
            e.preventDefault();
            window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
        });

        // Detect DevTools opening via keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // F12 or Ctrl+Shift+I or Ctrl+Shift+J or Ctrl+Shift+C or Ctrl+U
            if (e.keyCode === 123 || // F12
                (e.ctrlKey && e.shiftKey && e.keyCode === 73) || // Ctrl+Shift+I
                (e.ctrlKey && e.shiftKey && e.keyCode === 74) || // Ctrl+Shift+J
                (e.ctrlKey && e.shiftKey && e.keyCode === 67) || // Ctrl+Shift+C
                (e.ctrlKey && e.keyCode === 85)) { // Ctrl+U
                
                e.preventDefault();
                window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
            }
        });

        // Detect DevTools with window size check (more aggressive)
        let devtoolsOpen = false;
        const threshold = 160;
        
        setInterval(function() {
            if (window.outerHeight - window.innerHeight > threshold || 
                window.outerWidth - window.innerWidth > threshold) {
                if (!devtoolsOpen) {
                    devtoolsOpen = true;
                    window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
                }
            } else {
                devtoolsOpen = false;
            }
        }, 1000);
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
